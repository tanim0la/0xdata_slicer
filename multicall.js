const axios = require("axios")

let calldata =
  "0x5ae401dc00000000000000000000000000000000000000000000000000000000635e3bbf000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000000e4472b43f30000000000000000000000000000000000000000000000005292a579bd9300000000000000000000000000000000000000000000000002387e2b300ae422e8cb000000000000000000000000000000000000000000000000000000000000008000000000000000000000000045142ce38536024e15efb2b1d19e54b0db73e1b80000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000003845badade8e6dff049820680d1f14bd3903a5d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e404e45aaf000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000003845badade8e6dff049820680d1f14bd3903a5d0000000000000000000000000000000000000000000000000000000000000271000000000000000000000000045142ce38536024e15efb2b1d19e54b0db73e1b80000000000000000000000000000000000000000000000000e92596fd6290000000000000000000000000000000000000000000000000063abef65f3bb168627000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
// "0xac9650d8000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000002c0000000000000000000000000000000000000000000000000000000000000008413ead56200000000000000000000000061fe7a5257b963f231e1ef6e22cb3b4c6e28c531000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000000000000000000000000000000000000000002710000000000000000000000000000000000000000000831162ce86bc88052f80fd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001648831645600000000000000000000000061fe7a5257b963f231e1ef6e22cb3b4c6e28c531000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000000000000000000000000000000000000000002710fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffaf178000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002e3bdc25349196582d720000000000000000000000000000000000000000000000000c249fdd32778000000000000000000000000000000000000000000000002e1e525c2ef9dcec50c53000000000000000000000000000000000000000000000000c1cd7c9adfb0d9dc000000000000000000000000ed6c2cb9bf89a2d290e59025837454bf1f144c5000000000000000000000000000000000000000000000000000000000635ce8bf00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000412210e8a00000000000000000000000000000000000000000000000000000000"

async function decode(data) {
  start = 0
  end = 8
  text64 = ""
  for (i = 0; i < data.slice(10).length / 8; i++) {
    let selector = data.slice(2).slice(start, end)
    if (text64.length == 64) {
      console.log(`\t${text64}`)
      text64 = ""
    }
    try {
      if (!selector.includes("0000") && !selector.includes("ffff")) {
        let request = await axios.get(
          `https://www.4byte.directory/api/v1/signatures/?hex_signature=${selector}`,
        )
        let signature = request.data.results[0].text_signature
        console.log(`\nselector: \n\t0x${selector} ${signature}\nparams: `)
        text64 = ""
      } else {
        text64 += selector
      }
    } catch (err) {
      text64 += selector
    }
    start = end
    end += 8
  }
}

decode(calldata)
